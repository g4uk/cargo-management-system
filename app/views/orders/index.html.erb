<div class="breadcrumbs">
  <nav aria-label="breadcrumb" >
    <%= breadcrumbs do %>
      <%= breadcrumb 'Orders' %>
    <% end %>

    <%= link_to 'New order', new_order_path, class: 'btn btn-sm btn-primary action-button' %>
  </nav>
</div>

<%= render 'search' %>

<table class="table">
  <thead>
  <tr>
    <th scope="col">#</th>
    <th scope="col">Downloading address</th>
    <th scope="col">Unloading address</th>
    <th scope="col">Status</th>
    <th scope="col">Cost</th>
    <th scope="col">Goods</th>
    <th scope="col" class="text-center">Customer</th>
    <th scope="col">Driver</th>
    <th scope="col" colspan="2">Actions</th>
  </tr>
  </thead>
  <tbody>
  <% @orders.each do |order| %>
  <tr>
    <td><%= link_to order.id, order_path(order) %></td>
    <td><%= order.downloading_address %></td>
    <td><%= order.unloading_address %></td>
    <td><%= order.status %></td>
    <td><%= order.cost %></td>
    <td class="text-center"><%= order.goods.count %></td>
    <td><%= link_to order.customer.info, customer_path(order.customer) %></td>
    <% if order.driver %>
      <td><%= link_to order.driver.info, driver_path(order.driver) %></td>
    <% elsif !order.driver && current_driver %>
      <td><%= link_to 'Take order', actions_take_order_path(driver_id: current_driver.id,
                                                            order_id: order.id),
                      class: 'btn btn-outline-primary'%></td>
    <% else %>
      <td><%= link_to 'Assign driver', actions_new_driver_assignment_path(order_id: order.id),
                      class: 'btn btn-outline-primary'%></td>
    <% end %>
    <td><%= link_to 'Edit', edit_order_path(order), class: 'btn btn-success' %></td>
    <td><%= link_to 'Delete', order_path(order), method: :delete,
                    class: 'btn btn-danger', data: { confirm: 'Are you sure?' }%></td>
  </tr>
  <% end %>
  </tbody>
  <div class="container pagination justify-content-center">
    <%= paginate @orders %>
  </div>
</table>





